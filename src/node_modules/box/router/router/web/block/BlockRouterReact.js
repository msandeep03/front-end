import React, { Component } from 'react'
import { Route }            from 'react-router-dom'
import { Switch }           from 'react-router-dom'
import compose              from 'recompose/compose'
import lifecycle            from 'recompose/lifecycle'
import withHandlers         from 'recompose/withHandlers'


import withSpace            from 'evoke-me/space/all/withSpace'


import manager              from '../../api/manager'
import spaceRouter          from '../../space/spaceRouter'


const enhance = compose(
  withSpace(spaceRouter),
  withHandlers({
  }),
  lifecycle({
    componentDidMount() {
    }
  })
)

const BlockRouterReact = enhance(({
  fromRouter,
}) => {
  const { data, orderMap } = fromRouter

  return (
    <Switch>
      {orderMap.default.map((id) => {
        const { path } = data[id]

        return (
          <Route
            key={id}
            path={path}
            render={() => {
              const RenderComponent = manager.get({ path })

              return RenderComponent ? (
                <RenderComponent />
              ) : `router.api.manager Component not set`
            }}
          />
        )
      })}
    </Switch>
  )
})

export default BlockRouterReact