import React, { Component } from 'react'
import { Route }            from 'react-router-dom'
import { Switch }           from 'react-router-dom'
import compose              from 'recompose/compose'
import lifecycle            from 'recompose/lifecycle'


import withSpace            from 'evoke-me/space/all/withSpace'

import spaceNav             from '../../nav/space/spaceNav'
import PageEnter            from './PageEnter'
// import PageEditor           from './PageEditor'
import PageHome             from './PageHome'
import PageMyWork           from './PageMyWork'


const enhance = compose(
  withSpace(spaceNav),
  lifecycle({
    componentDidMount() {
      const { match, fromNav } = this.props
      const path = match.path.replace(`*`, ``)
      fromNav.pathSet(path)
    }
  }),  
)

const Router = enhance(({ match }) => {
  const path = match.path.replace(`*`, ``)

  const pathMap = {
    PATH_ENTER: `${ path }/enter`.replace(/\/\/+/g, '/'),
    PATH_EDITOR: `${ path }/editor`.replace(/\/\/+/g, '/'),
    PATH_MY_WORK: `${ path }/my`.replace(/\/\/+/g, '/'),
  }

  return (
    <Switch>
      <Route exact path={ pathMap.PATH_ENTER } component={ PageEnter } />
      {/*
      <Route exact path={ pathMap.PATH_EDITOR } component={ PageEditor } />
      */}
      <Route exact path={ pathMap.PATH_MY_WORK } component={ PageMyWork } />
      <Route path={path} component={PageHome} />
    </Switch>
  )
})

export default Router